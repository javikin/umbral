---
name: Rediseñar Onboarding Flow
status: closed
created: 2026-01-05T03:15:00Z
updated: 2026-01-05T03:15:00Z
github:
parallel: false
depends_on: [001, 002]
effort: 12h
---

# Task: Rediseñar Onboarding Flow

## Descripción

Rediseñar las 6 pantallas del onboarding para crear una primera impresión memorable y profesional.

## Pantallas a Rediseñar

### 1. WelcomeScreen

**Actual:** Texto simple con botón
**Nuevo:**
- Ilustración hero minimalista (concepto de "umbral"/puerta)
- Título grande: "Umbral"
- Subtítulo: "Tu espacio de enfoque"
- CTA: "Comenzar" con gradiente sutil
- Animación de entrada fade + slide up

```kotlin
@Composable
fun WelcomeScreen(onContinue: () -> Unit) {
    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(UmbralSpacing.screenHorizontal),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        // Hero illustration (Lottie o SVG)
        UmbralIllustration(R.drawable.il_welcome)

        Spacer(Modifier.height(UmbralSpacing.xl))

        Text(
            "Umbral",
            style = MaterialTheme.typography.displayLarge
        )

        Text(
            "Tu espacio de enfoque",
            style = MaterialTheme.typography.bodyLarge,
            color = MaterialTheme.colorScheme.onSurfaceVariant
        )

        Spacer(Modifier.height(UmbralSpacing.xxl))

        UmbralButton(
            text = "Comenzar",
            onClick = onContinue,
            modifier = Modifier.fillMaxWidth()
        )
    }
}
```

### 2. HowItWorksScreen

**Actual:** Lista de pasos simple
**Nuevo:**
- 3 pasos con iconos custom animados
- Animación secuencial al entrar
- Indicadores de paso con progress

```kotlin
data class OnboardingStep(
    val icon: Int,
    val title: String,
    val description: String
)

val steps = listOf(
    OnboardingStep(R.drawable.ic_apps, "Elige apps", "Selecciona las apps que quieres bloquear"),
    OnboardingStep(R.drawable.ic_nfc, "Configura tu tag", "Usa un tag NFC o código QR"),
    OnboardingStep(R.drawable.ic_shield, "¡Listo!", "Activa el bloqueo y enfócate")
)
```

### 3. PermissionsScreen

**Actual:** Lista de permisos básica
**Nuevo:**
- Cards individuales por permiso
- Estados visuales claros (pendiente/otorgado)
- Animación de check al otorgar
- Explicación breve de cada permiso

### 4. SelectAppsScreen

**Ya mejorado anteriormente - pulir:**
- Usar nuevos UmbralChip para categorías
- Mejorar animación de selección
- Agregar contador flotante de apps seleccionadas

### 5. HowToUnblockScreen

**Actual:** Texto explicativo
**Nuevo:**
- Ilustración de NFC tag siendo escaneado
- Ilustración de QR code
- Animación mostrando el flujo
- Mensaje motivacional

### 6. SuccessScreen

**Actual:** Mensaje simple
**Nuevo:**
- Celebración visual (confetti sutil usando Lottie)
- Resumen de configuración
- Transición suave al home
- Botón "Ir al inicio"

## Animaciones

### Transiciones entre pantallas
```kotlin
// Shared element transition para indicadores
// Fade + slide para contenido
val enterTransition = fadeIn() + slideInHorizontally { it }
val exitTransition = fadeOut() + slideOutHorizontally { -it }
```

### Animaciones de elementos
- Ilustraciones: fade in con scale sutil
- Pasos: appear secuencialmente con delay
- Botones: spring animation en press
- Check marks: draw animation

## Archivos a Modificar

- `OnboardingNavigation.kt` - Agregar animaciones de transición
- `WelcomeScreen.kt` - Rediseño completo
- `HowItWorksScreen.kt` - Rediseño completo
- `PermissionsScreen.kt` - Rediseño completo
- `SelectAppsScreen.kt` - Pulir con nuevos componentes
- `HowToUnblockScreen.kt` - Crear si no existe
- `OnboardingSuccessScreen.kt` - Rediseño completo

## Criterios de Aceptación

- [ ] Todas las pantallas usan el nuevo Design System
- [ ] Animaciones de entrada/salida funcionando
- [ ] Ilustraciones placeholder implementadas
- [ ] Dark mode funciona en todo el flow
- [ ] Transiciones smooth entre pantallas
- [ ] Confetti en success screen

## Assets Necesarios

- `il_welcome.xml` - Ilustración de bienvenida
- `il_how_it_works_1.xml` - Paso 1
- `il_how_it_works_2.xml` - Paso 2
- `il_how_it_works_3.xml` - Paso 3
- `il_nfc_scan.xml` - NFC scanning
- `il_qr_scan.xml` - QR scanning
- `anim_confetti.json` - Lottie confetti
