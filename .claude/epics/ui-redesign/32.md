---
name: RediseÃ±ar Profiles Screen
status: closed
created: 2026-01-05T03:15:00Z
updated: 2026-01-05T03:15:00Z
github:
parallel: false
depends_on: [001, 002]
effort: 6h
---

# Task: RediseÃ±ar Profiles Screen

## DescripciÃ³n

RediseÃ±ar la pantalla de perfiles para hacerla mÃ¡s visual y fÃ¡cil de usar.

## DiseÃ±o Visual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Perfiles                    ï¼‹   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ¯ Productividad      âœ“    â”‚   â”‚ <- Activo
â”‚  â”‚ 8 apps bloqueadas          â”‚   â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸŒ™ Noche                    â”‚   â”‚
â”‚  â”‚ 12 apps bloqueadas         â”‚   â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“š Estudio                  â”‚   â”‚
â”‚  â”‚ 5 apps bloqueadas          â”‚   â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”   â”‚
â”‚  â”‚  ï¼‹ Crear nuevo perfil     â”‚   â”‚
â”‚  â”” â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Componentes

### ProfileCard

```kotlin
@Composable
fun ProfileCard(
    profile: BlockingProfile,
    isActive: Boolean,
    onClick: () -> Unit,
    onEdit: () -> Unit,
    onDelete: () -> Unit
) {
    val backgroundColor = if (isActive) {
        MaterialTheme.colorScheme.primaryContainer
    } else {
        MaterialTheme.colorScheme.surface
    }

    UmbralCard(
        onClick = onClick,
        modifier = Modifier.animateContentSize()
    ) {
        Row(
            verticalAlignment = Alignment.CenterVertically
        ) {
            // Icono del perfil
            ProfileIcon(
                iconName = profile.iconName,
                color = Color(android.graphics.Color.parseColor(profile.colorHex)),
                modifier = Modifier.size(48.dp)
            )

            Spacer(Modifier.width(UmbralSpacing.md))

            Column(Modifier.weight(1f)) {
                Row(verticalAlignment = Alignment.CenterVertically) {
                    Text(
                        profile.name,
                        style = MaterialTheme.typography.titleMedium
                    )
                    if (isActive) {
                        Spacer(Modifier.width(UmbralSpacing.sm))
                        ActiveBadge()
                    }
                }

                Text(
                    "${profile.blockedApps.size} apps bloqueadas",
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
            }

            // Menu de opciones
            ProfileOptionsMenu(
                onEdit = onEdit,
                onDelete = onDelete
            )
        }

        // Visual indicator de cantidad de apps
        Spacer(Modifier.height(UmbralSpacing.sm))

        LinearProgressIndicator(
            progress = { (profile.blockedApps.size / 20f).coerceAtMost(1f) },
            modifier = Modifier
                .fillMaxWidth()
                .height(4.dp)
                .clip(RoundedCornerShape(2.dp)),
            color = Color(android.graphics.Color.parseColor(profile.colorHex))
        )
    }
}
```

### ProfileIcon

```kotlin
@Composable
fun ProfileIcon(
    iconName: String,
    color: Color,
    modifier: Modifier = Modifier
) {
    val icon = when (iconName) {
        "productivity" -> Icons.Outlined.Work
        "night" -> Icons.Outlined.Nightlight
        "study" -> Icons.Outlined.Book
        "social" -> Icons.Outlined.Groups
        "fitness" -> Icons.Outlined.FitnessCenter
        else -> Icons.Outlined.Shield
    }

    Box(
        modifier = modifier
            .background(
                color.copy(alpha = 0.15f),
                CircleShape
            ),
        contentAlignment = Alignment.Center
    ) {
        Icon(
            imageVector = icon,
            contentDescription = null,
            tint = color,
            modifier = Modifier.size(24.dp)
        )
    }
}
```

### ActiveBadge

```kotlin
@Composable
fun ActiveBadge() {
    Surface(
        color = UmbralSuccess.copy(alpha = 0.15f),
        shape = RoundedCornerShape(4.dp)
    ) {
        Text(
            "Activo",
            style = MaterialTheme.typography.labelSmall,
            color = UmbralSuccess,
            modifier = Modifier.padding(horizontal = 6.dp, vertical = 2.dp)
        )
    }
}
```

### CreateProfileCard

```kotlin
@Composable
fun CreateProfileCard(onClick: () -> Unit) {
    OutlinedCard(
        onClick = onClick,
        border = BorderStroke(
            1.dp,
            MaterialTheme.colorScheme.outline.copy(alpha = 0.5f)
        ),
        modifier = Modifier.fillMaxWidth()
    ) {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(UmbralSpacing.cardPadding),
            horizontalArrangement = Arrangement.Center,
            verticalAlignment = Alignment.CenterVertically
        ) {
            Icon(
                Icons.Outlined.Add,
                contentDescription = null,
                tint = MaterialTheme.colorScheme.primary
            )
            Spacer(Modifier.width(UmbralSpacing.sm))
            Text(
                "Crear nuevo perfil",
                color = MaterialTheme.colorScheme.primary
            )
        }
    }
}
```

## Animaciones

### Al cambiar perfil activo
```kotlin
// Scale animation en la card que se activa
val scale by animateFloatAsState(
    targetValue = if (isActive) 1.02f else 1f,
    animationSpec = spring(stiffness = Spring.StiffnessLow)
)

// Border highlight animation
val borderWidth by animateDpAsState(
    targetValue = if (isActive) 2.dp else 0.dp
)
```

### Al crear perfil
- Card aparece con slide up + fade in
- Feedback haptic al crear

### Al eliminar perfil
- Card desaparece con slide out + fade out
- ConfirmaciÃ³n con bottom sheet

## Archivos a Modificar

- `ProfilesScreen.kt` - RediseÃ±o completo
- `ProfilesViewModel.kt` - Agregar funcionalidad de activar
- Crear: `ProfileCard.kt`
- Crear: `ProfileIcon.kt`
- Crear: `CreateProfileCard.kt`

## Criterios de AceptaciÃ³n

- [ ] Cards visuales con iconos y colores
- [ ] Estado activo claramente visible
- [ ] AnimaciÃ³n al cambiar perfil
- [ ] MenÃº de opciones (editar, eliminar)
- [ ] Crear perfil con card outline
- [ ] Dark mode funciona correctamente
- [ ] Contador de apps en cada perfil
