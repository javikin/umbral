---
name: Rediseñar Settings Screen
status: closed
created: 2026-01-05T03:15:00Z
updated: 2026-01-05T03:15:00Z
github:
parallel: false
depends_on: [001, 002]
effort: 4h
---

# Task: Rediseñar Settings Screen

## Descripción

Reorganizar y rediseñar la pantalla de ajustes con secciones claras y mejor UX.

## Diseño Visual

```
┌─────────────────────────────────────┐
│  ← Ajustes                          │
│                                     │
│  BLOQUEO                            │
│  ┌─────────────────────────────┐   │
│  │ Modo estricto          ○──│   │
│  │ No permite desbloquear     │   │
│  ├─────────────────────────────┤   │
│  │ Tiempo de desbloqueo   ▶  │   │
│  │ 30 minutos                 │   │
│  └─────────────────────────────┘   │
│                                     │
│  APARIENCIA                         │
│  ┌─────────────────────────────┐   │
│  │ Tema oscuro           ○──│   │
│  ├─────────────────────────────┤   │
│  │ Idioma                  ▶  │   │
│  │ Español                    │   │
│  └─────────────────────────────┘   │
│                                     │
│  NOTIFICACIONES                     │
│  ┌─────────────────────────────┐   │
│  │ Resumen diario        ●──│   │
│  ├─────────────────────────────┤   │
│  │ Recordatorios          ▶  │   │
│  └─────────────────────────────┘   │
│                                     │
│  INFORMACIÓN                        │
│  ┌─────────────────────────────┐   │
│  │ Sobre Umbral            ▶  │   │
│  ├─────────────────────────────┤   │
│  │ Código fuente           ▶  │   │
│  ├─────────────────────────────┤   │
│  │ Privacidad              ▶  │   │
│  └─────────────────────────────┘   │
│                                     │
│  Versión 1.0.0                      │
│                                     │
└─────────────────────────────────────┘
```

## Componentes

### SettingsSection

```kotlin
@Composable
fun SettingsSection(
    title: String,
    content: @Composable ColumnScope.() -> Unit
) {
    Column(
        modifier = Modifier.padding(vertical = UmbralSpacing.sm)
    ) {
        Text(
            text = title,
            style = MaterialTheme.typography.labelLarge,
            color = MaterialTheme.colorScheme.primary,
            modifier = Modifier.padding(
                horizontal = UmbralSpacing.screenHorizontal,
                vertical = UmbralSpacing.sm
            )
        )

        UmbralCard(
            modifier = Modifier.fillMaxWidth()
        ) {
            content()
        }
    }
}
```

### SettingsToggleRow

```kotlin
@Composable
fun SettingsToggleRow(
    title: String,
    subtitle: String? = null,
    icon: ImageVector? = null,
    checked: Boolean,
    onCheckedChange: (Boolean) -> Unit
) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .padding(UmbralSpacing.cardPadding),
        verticalAlignment = Alignment.CenterVertically
    ) {
        icon?.let {
            Icon(
                imageVector = it,
                contentDescription = null,
                tint = MaterialTheme.colorScheme.onSurfaceVariant,
                modifier = Modifier.size(24.dp)
            )
            Spacer(Modifier.width(UmbralSpacing.md))
        }

        Column(Modifier.weight(1f)) {
            Text(title, style = MaterialTheme.typography.bodyLarge)
            subtitle?.let {
                Text(
                    it,
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
            }
        }

        UmbralToggle(
            checked = checked,
            onCheckedChange = onCheckedChange
        )
    }
}
```

### SettingsNavigationRow

```kotlin
@Composable
fun SettingsNavigationRow(
    title: String,
    subtitle: String? = null,
    icon: ImageVector? = null,
    onClick: () -> Unit
) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .clickable(onClick = onClick)
            .padding(UmbralSpacing.cardPadding),
        verticalAlignment = Alignment.CenterVertically
    ) {
        icon?.let {
            Icon(
                imageVector = it,
                contentDescription = null,
                tint = MaterialTheme.colorScheme.onSurfaceVariant,
                modifier = Modifier.size(24.dp)
            )
            Spacer(Modifier.width(UmbralSpacing.md))
        }

        Column(Modifier.weight(1f)) {
            Text(title, style = MaterialTheme.typography.bodyLarge)
            subtitle?.let {
                Text(
                    it,
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onSurfaceVariant
                )
            }
        }

        Icon(
            Icons.AutoMirrored.Filled.KeyboardArrowRight,
            contentDescription = null,
            tint = MaterialTheme.colorScheme.onSurfaceVariant
        )
    }
}
```

### SettingsDivider

```kotlin
@Composable
fun SettingsDivider() {
    HorizontalDivider(
        modifier = Modifier.padding(horizontal = UmbralSpacing.md),
        color = MaterialTheme.colorScheme.outlineVariant
    )
}
```

## Implementación

### SettingsScreen.kt

```kotlin
@Composable
fun SettingsScreen(
    onNavigateBack: () -> Unit,
    viewModel: SettingsViewModel = hiltViewModel()
) {
    val uiState by viewModel.uiState.collectAsState()

    Scaffold(
        topBar = {
            TopAppBar(
                title = { Text("Ajustes") },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) {
                        Icon(Icons.AutoMirrored.Filled.ArrowBack, "Volver")
                    }
                }
            )
        }
    ) { padding ->
        LazyColumn(
            modifier = Modifier
                .fillMaxSize()
                .padding(padding)
        ) {
            // BLOQUEO
            item {
                SettingsSection("BLOQUEO") {
                    SettingsToggleRow(
                        title = "Modo estricto",
                        subtitle = "No permite desbloquear con NFC/QR",
                        checked = uiState.strictMode,
                        onCheckedChange = viewModel::setStrictMode
                    )
                    SettingsDivider()
                    SettingsNavigationRow(
                        title = "Tiempo de desbloqueo",
                        subtitle = "${uiState.unlockDuration} minutos",
                        onClick = { /* Show picker */ }
                    )
                }
            }

            // APARIENCIA
            item {
                SettingsSection("APARIENCIA") {
                    SettingsToggleRow(
                        title = "Tema oscuro",
                        checked = uiState.darkMode,
                        onCheckedChange = viewModel::setDarkMode
                    )
                }
            }

            // NOTIFICACIONES
            item {
                SettingsSection("NOTIFICACIONES") {
                    SettingsToggleRow(
                        title = "Resumen diario",
                        subtitle = "Recibe un resumen de tu progreso",
                        checked = uiState.dailySummary,
                        onCheckedChange = viewModel::setDailySummary
                    )
                }
            }

            // INFORMACIÓN
            item {
                SettingsSection("INFORMACIÓN") {
                    SettingsNavigationRow(
                        title = "Sobre Umbral",
                        onClick = { /* Navigate to About */ }
                    )
                    SettingsDivider()
                    SettingsNavigationRow(
                        title = "Código fuente",
                        subtitle = "GitHub",
                        onClick = { /* Open GitHub */ }
                    )
                    SettingsDivider()
                    SettingsNavigationRow(
                        title = "Privacidad",
                        onClick = { /* Open Privacy */ }
                    )
                }
            }

            // Version
            item {
                Text(
                    "Versión ${BuildConfig.VERSION_NAME}",
                    style = MaterialTheme.typography.bodySmall,
                    color = MaterialTheme.colorScheme.onSurfaceVariant,
                    modifier = Modifier
                        .fillMaxWidth()
                        .padding(UmbralSpacing.lg),
                    textAlign = TextAlign.Center
                )
            }
        }
    }
}
```

## Archivos a Modificar

- `SettingsScreen.kt` - Rediseño completo
- Crear: `SettingsSection.kt`
- Crear: `SettingsToggleRow.kt`
- Crear: `SettingsNavigationRow.kt`

## Criterios de Aceptación

- [ ] Secciones claras con headers
- [ ] Toggles con animación suave
- [ ] Navegación con flechas
- [ ] Subtítulos explicativos
- [ ] Dark mode funciona
- [ ] Versión de la app visible
