---
name: Redise√±ar Blocking Screen (concepto apoyo)
status: closed
created: 2026-01-05T03:15:00Z
updated: 2026-01-05T03:15:00Z
github:
parallel: false
depends_on: [001, 002]
effort: 6h
---

# Task: Redise√±ar Blocking Screen

## Descripci√≥n

Transformar la pantalla de bloqueo de una experiencia punitiva a una de apoyo y motivaci√≥n.

## Concepto: De "Castigo" a "Apoyo"

### Antes (Problema)
- Fondo rojo intimidante
- Icono de bloqueo/prohibici√≥n
- Mensaje negativo: "App bloqueada"
- Sensaci√≥n de castigo

### Despu√©s (Soluci√≥n)
- Fondo con gradiente suave (indigo ‚Üí violeta)
- Icono de escudo protector
- Mensaje positivo: "Est√°s protegiendo tu enfoque"
- Sensaci√≥n de empoderamiento

## Dise√±o Visual

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                     ‚îÇ
‚îÇ         ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ           ‚îÇ
‚îÇ         ‚îÇ              ‚îÇ           ‚îÇ
‚îÇ         ‚îÇ    üõ°Ô∏è        ‚îÇ           ‚îÇ  <- Shield icon con
‚îÇ         ‚îÇ              ‚îÇ           ‚îÇ     breathing animation
‚îÇ         ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ           ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ    Est√°s protegiendo tu enfoque    ‚îÇ  <- Mensaje principal
‚îÇ                                     ‚îÇ
‚îÇ    üî• Llevas 12 d√≠as concentrado   ‚îÇ  <- Streak motivacional
‚îÇ                                     ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ    ‚îÇ    Volver al inicio     ‚îÇ     ‚îÇ  <- Bot√≥n principal
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ         Desbloquear (NFC)          ‚îÇ  <- Secundario (menos visible)
‚îÇ                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Background: Gradiente suave animado
```

## Implementaci√≥n

### BlockingScreen.kt

```kotlin
@Composable
fun BlockingScreen(
    blockedAppName: String,
    currentStreak: Int,
    isStrictMode: Boolean,
    onGoHome: () -> Unit,
    onUnlock: () -> Unit
) {
    Box(
        modifier = Modifier
            .fillMaxSize()
            .background(
                brush = Brush.verticalGradient(
                    colors = listOf(
                        UmbralPrimary.copy(alpha = 0.9f),
                        UmbralSecondary.copy(alpha = 0.8f)
                    )
                )
            )
    ) {
        Column(
            modifier = Modifier
                .fillMaxSize()
                .padding(UmbralSpacing.screenHorizontal),
            horizontalAlignment = Alignment.CenterHorizontally,
            verticalArrangement = Arrangement.Center
        ) {
            // Shield icon con breathing animation
            BreathingShieldIcon(
                modifier = Modifier.size(120.dp)
            )

            Spacer(Modifier.height(UmbralSpacing.xl))

            // Mensaje principal
            Text(
                "Est√°s protegiendo tu enfoque",
                style = MaterialTheme.typography.headlineMedium,
                color = Color.White,
                textAlign = TextAlign.Center
            )

            Spacer(Modifier.height(UmbralSpacing.md))

            // Streak motivacional
            if (currentStreak > 0) {
                Row(
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    Text("üî•", fontSize = 24.sp)
                    Spacer(Modifier.width(UmbralSpacing.sm))
                    Text(
                        "Llevas $currentStreak d√≠as concentrado",
                        style = MaterialTheme.typography.bodyLarge,
                        color = Color.White.copy(alpha = 0.9f)
                    )
                }
            }

            Spacer(Modifier.height(UmbralSpacing.xxl))

            // Bot√≥n principal
            UmbralButton(
                text = "Volver al inicio",
                onClick = onGoHome,
                variant = ButtonVariant.Secondary, // Blanco
                modifier = Modifier.fillMaxWidth()
            )

            // Opci√≥n de desbloqueo (solo si no es strict mode)
            if (!isStrictMode) {
                Spacer(Modifier.height(UmbralSpacing.lg))

                TextButton(onClick = onUnlock) {
                    Text(
                        "Desbloquear (NFC)",
                        color = Color.White.copy(alpha = 0.7f)
                    )
                }
            }
        }

        // Breathing background animation
        BreathingOverlay()
    }
}
```

### BreathingShieldIcon

```kotlin
@Composable
fun BreathingShieldIcon(modifier: Modifier = Modifier) {
    val infiniteTransition = rememberInfiniteTransition(label = "breathing")

    val scale by infiniteTransition.animateFloat(
        initialValue = 1f,
        targetValue = 1.05f,
        animationSpec = infiniteRepeatable(
            animation = tween(2000, easing = EaseInOutSine),
            repeatMode = RepeatMode.Reverse
        ),
        label = "scale"
    )

    val alpha by infiniteTransition.animateFloat(
        initialValue = 0.8f,
        targetValue = 1f,
        animationSpec = infiniteRepeatable(
            animation = tween(2000, easing = EaseInOutSine),
            repeatMode = RepeatMode.Reverse
        ),
        label = "alpha"
    )

    Box(modifier = modifier.scale(scale)) {
        // Glow effect
        Box(
            modifier = Modifier
                .size(140.dp)
                .background(
                    Color.White.copy(alpha = alpha * 0.2f),
                    CircleShape
                )
                .align(Alignment.Center)
        )

        // Shield icon
        Icon(
            imageVector = Icons.Filled.Shield,
            contentDescription = "Protecci√≥n",
            tint = Color.White,
            modifier = Modifier
                .size(80.dp)
                .align(Alignment.Center)
        )
    }
}
```

### BreathingOverlay

```kotlin
@Composable
fun BreathingOverlay() {
    val infiniteTransition = rememberInfiniteTransition(label = "overlay")

    val offset by infiniteTransition.animateFloat(
        initialValue = 0f,
        targetValue = 100f,
        animationSpec = infiniteRepeatable(
            animation = tween(4000, easing = LinearEasing),
            repeatMode = RepeatMode.Reverse
        ),
        label = "offset"
    )

    // Subtle moving gradient overlay for calming effect
    Box(
        modifier = Modifier
            .fillMaxSize()
            .background(
                brush = Brush.radialGradient(
                    colors = listOf(
                        Color.White.copy(alpha = 0.05f),
                        Color.Transparent
                    ),
                    center = Offset(offset * 10, offset * 10),
                    radius = 500f
                )
            )
    )
}
```

## Archivos a Modificar

- `BlockingActivity.kt` - Actualizar para pasar streak
- `BlockingScreen.kt` - Redise√±o completo
- Crear: `BreathingShieldIcon.kt`
- Crear: `BreathingOverlay.kt`

## Criterios de Aceptaci√≥n

- [ ] Gradiente suave en lugar de rojo
- [ ] Shield icon con breathing animation
- [ ] Mensaje motivacional positivo
- [ ] Streak se muestra correctamente
- [ ] Bot√≥n "Volver al inicio" funciona
- [ ] Opci√≥n de desbloqueo oculta en strict mode
- [ ] Animaciones smooth a 60fps
- [ ] Se siente calmante, no estresante

## Principios UX

1. **Reconocer sin juzgar** - No culpar al usuario
2. **Motivar a continuar** - Mostrar progreso (streak)
3. **Ofrecer alternativa clara** - Volver al inicio
4. **Calmar** - Breathing animation para reducir ansiedad
